# 界面设计渐进式验证指南

## 核心理念

**Markdown是静态的，用于表达"设计意图"**
**HTML是动态的，用于验证"操作流程"**

在Markdown阶段无法发现的问题：
- ❌ 按钮点击后是否符合预期
- ❌ 状态切换是否流畅
- ❌ 错误提示是否清晰
- ❌ 多步操作是否繁琐

只有在HTML原型中实际操作才能发现！

---

## Stage 1: Markdown框架验证清单

### 意图验证 (不需要操作，只看文字)

**布局意图**:
- [ ] ASCII图能否让你清楚看出界面"长什么样"？
- [ ] 组件位置安排是否合理？
- [ ] 信息层级是否清晰（重要信息在上方/左侧）？

**功能意图**:
- [ ] 产品使用流程图是否覆盖所有场景？
- [ ] 优先级划分是否准确（P0功能是否真的必需）？
- [ ] 状态机是否包含所有用户操作路径？

**数据流意图**:
- [ ] 数据流图是否清楚展示前后端交互？
- [ ] Session State设计是否合理？
- [ ] 是否有遗漏的API调用？

**确认方式**:
- 阅读Markdown文档
- 想象界面和流程
- 提出修改意见或确认"意图OK"

---

## Stage 2: HTML原型流程验证清单

### 🧪 必须验证的关键流程

#### 流程1: 核心操作路径 (P0功能)

**模型管理示例**:
```
1. 打开HTML原型
2. 查看模型列表 → 能否快速找到目标模型？
3. 点击某个模型行 → 侧边栏是否立即显示编辑器？
4. 修改JSON配置 → 编辑体验是否流畅？
5. 点击"保存" → 是否有明确的成功反馈？
6. 模拟验证失败 → 错误提示是否清晰？
7. 点击"取消" → 是否清除编辑状态？
```

**验证标准**:
- ✅ 每步操作反馈明确
- ✅ 不需要超过3次点击完成核心任务
- ✅ 错误时能明确知道如何修复
- ✅ 可以随时取消或后退

#### 流程2: 边缘场景

**空状态测试**:
```
1. 模型列表为空 → 是否有友好提示？
2. 搜索无结果 → 是否提示"未找到"？
3. 未选择模型时 → 侧边栏显示什么？
```

**错误状态测试**:
```
1. JSON格式错误 → 错误信息是否具体？
2. API调用失败 → 是否提供重试？
3. 测试超时 → 是否有timeout提示？
```

**长文本测试**:
```
1. 模型名称很长 → 是否溢出或截断？
2. 错误消息很长 → 是否可滚动查看？
```

#### 流程3: 状态切换

**状态一致性**:
```
1. 选择模型A → 编辑配置
2. 不保存，直接点击模型B → A的编辑是否丢失？
3. 保存模型A → 列表是否立即更新？
4. 重载模型 → 活跃模型指标是否刷新？
```

---

## 📋 HTML原型验证报告模板

用户操作HTML后填写：

```markdown
## HTML原型验证报告 - [界面名称]

**验证时间**: 2025-11-13
**原型版本**: v1.0

### ✅ 通过的流程
1. [流程名称]: [简要说明]
   - 体验: 流畅/符合预期
   - 建议: 无

### ⚠️ 发现的问题
1. [问题描述]
   - 复现步骤: [1, 2, 3...]
   - 期望行为: [应该怎样]
   - 实际行为: [实际怎样]
   - 严重程度: 🔴严重 / 🟡中等 / 🟢轻微
   - 建议修改: [具体建议]

### 💡 优化建议
1. [建议内容]
   - 当前设计: [...]
   - 建议改为: [...]
   - 理由: [...]

### 📝 总结
- [ ] 核心流程验证通过
- [ ] 边缘场景处理合理
- [ ] 状态切换一致
- [ ] 错误提示清晰
- [ ] 可以进入开发阶段

或

- [ ] 需要修改HTML原型，再次验证
- [ ] 需要回到Markdown阶段，重新设计
```

---

## 🔄 迭代流程

### 情况1: Markdown阶段发现问题

```
用户: "流程图中缺少'批量导入'功能"
  ↓
修改Markdown框架 → 用户再次确认意图
  ↓
意图OK → 生成HTML
```

### 情况2: HTML阶段发现问题

```
用户: "操作HTML发现：保存后没有成功提示，不知道是否保存成功"
  ↓
问题严重程度判断:
  - 🔴严重: 回到Markdown重新设计数据流
  - 🟡中等: 直接修改HTML原型
  - 🟢轻微: 记录到开发阶段注意事项
  ↓
修改HTML → 用户重新验证流程
  ↓
流程OK → 进入开发
```

---

## 🎯 常见验证发现

### Markdown阶段常见遗漏

1. **缺少"空状态"设计**
   - Markdown只画了"有数据"的界面
   - 实际上"无数据"也需要设计

2. **缺少"加载中"状态**
   - Markdown只定义了"成功"和"失败"
   - 实际上API调用中需要loading

3. **缺少"确认对话框"**
   - Markdown流程图中直接"删除"
   - 实际上危险操作需要二次确认

### HTML阶段常见发现

1. **点击反馈不明显**
   - 按钮点击后无视觉变化
   - 用户不知道是否响应

2. **多步操作太繁琐**
   - 完成任务需要5次点击
   - 应该简化为2-3次

3. **错误提示位置不合理**
   - 错误在页面底部，需要滚动
   - 应该在操作区域附近

4. **状态不一致**
   - 编辑了数据但未保存，切换到其他行后编辑丢失
   - 应该提示"是否保存"

---

## 📊 验证效果对比

### 传统方式 (直接写代码)

```
需求文档 → Streamlit代码 → 运行查看
  ↓
发现问题 → 改代码 → 再运行 → 又发现问题 → 再改...
  ↓
10次迭代后勉强可用
```

**成本**: 高 (每次修改都要改代码、重启、测试)

### 渐进式验证 (Markdown → HTML → 代码)

```
Markdown框架 → 用户确认意图 (5分钟)
  ↓
HTML原型 → 用户验证流程 (10分钟) → 发现3个问题 → 修改HTML (5分钟) → 再验证 → OK
  ↓
Streamlit代码 → 一次性实现正确 → 无需大改
```

**成本**: 低 (前期验证成本小，后期开发一次到位)

---

## 🚀 最佳实践

### 产品agent输出Markdown时

- ✅ 详尽描述每个组件的意图
- ✅ 用Mermaid图表达复杂流程
- ✅ 标注所有可能的状态和异常
- ✅ 提供多个界面示例 (有数据、无数据、错误)

### 产品agent输出HTML时

- ✅ 实现真实的交互逻辑
- ✅ 包含所有状态切换
- ✅ 模拟成功、失败、超时等场景
- ✅ 提供"重置"按钮方便反复测试

### 用户验证HTML时

- ✅ 实际操作所有按钮和交互
- ✅ 尝试"破坏性"操作（输入错误数据、快速点击等）
- ✅ 检查边缘场景（空状态、长文本、慢网络）
- ✅ 记录所有不符合预期的地方

---

**这个验证流程确保：设计意图 → 流程验证 → 代码实现 三阶段逐步确认，避免后期大改！**
